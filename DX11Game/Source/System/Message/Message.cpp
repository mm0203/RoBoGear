//=============================================================================
// Message.cpp
//=============================================================================
// Author  松野 将之
//=============================================================================

#include "Message.h"
#define _CRT_SECURE_NO_WARNINGS

//=============================================================================
// 
// コンストラクタ
// 
//=============================================================================
CMessage::CMessage()
{ 
	Init(); 
}

//=============================================================================
// 
// 初期化処理
// 
//=============================================================================
void CMessage::Init()
{
	m_MessagePos = { 0.0f,0.0f };
	m_Mag = DefaultMag;
}

//=============================================================================
// 
// 終了処理
// 
//=============================================================================
void CMessage::Uninit()
{
	
}

//=============================================================================
// 
// 更新処理
// 
//=============================================================================
void CMessage::Update()
{
	
}

//=============================================================================
// 
// 描画処理
// 
//=============================================================================
void CMessage::Draw()
{
	char* pchar = m_Message;

	while (*pchar != '\0')
	{
		// 入力された文字から検索
		unsigned int CharNum = *pchar - 'A';
		if (CharNum == ' ' - 'A')
		{
			pchar++;
			continue;
		}
		// UVの場所を取得しセット
		int u = CharNum % FontFrameX;
		int v = CharNum / FontFrameX;
		float U = u * CPolygon::GetFrameSize().x;
		float V = v * CPolygon::GetFrameSize().y + 0.0000001f;
		CPolygon::SetUV({ U,V });

		// 位置とサイズを設定
		XMFLOAT2 pos = m_MessagePos;
		pos.x += (pchar - m_Message) * ((FontSizeX * m_Mag) + 5);
		CPolygon::SetPosition(pos);
		CPolygon::Draw();
		pchar++;
	}
}
