//=============================================================================
// MeSsage.cpp
//=============================================================================
// Author  松野 将之
//=============================================================================

#include "Message.h"
#define _CRT_SECURE_NO_WARNINGS

//=============================================================================
// 
// コンストラクタ
// 
//=============================================================================
Message::Message()
{ 
	Init(); 
}

//=============================================================================
// 
// 初期化処理
// 
//=============================================================================
void Message::Init()
{
	m_MessagePos = { 0.0f,0.0f };
	m_Mag = DEFAULT_MAG;
}

//=============================================================================
// 
// 終了処理
// 
//=============================================================================
void Message::Uninit()
{
	
}

//=============================================================================
// 
// 更新処理
// 
//=============================================================================
void Message::Update()
{
	
}

//=============================================================================
// 
// 描画処理
// 
//=============================================================================
void Message::Draw()
{
	char* pchar = m_Message;
	while (*pchar != '\0')
	{
		unsigned int CharNum = *pchar - 'A';
		if (CharNum == ' ' - 'A')
		{
			pchar++;
			continue;
		}
		int u = CharNum % FONTFRAME_X;
		int v = CharNum / FONTFRAME_X;
		float U = u * CPolygon::GetFrameSize().x;
		float V = v * CPolygon::GetFrameSize().y + 0.0000001f;
		CPolygon::SetUV({ U,V });
		XMFLOAT2 pos = m_MessagePos;
		pos.x += (pchar - m_Message) * ((FONTSIZE_X * m_Mag) + 5);
		CPolygon::SetPosition(pos);
		CPolygon::Draw();
		pchar++;
	}
}
